<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ğŸ“ èµ„æºç±»å‹</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link type="text/css" rel="stylesheet" href="assets/style.css" />
  <link type="text/css" rel="stylesheet" href="assets/pilcrow.css" />
  <link type="text/css" rel="stylesheet" href="assets/hljs-github.min.css"/>
  <!--<script async src="https://www.googletagmanager.com/gtag/js?id=UA-110647385-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110647385-1');
  </script>-->
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?6b5f065a80e0af3ff54139cf0ae94d47";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
  </script>    
</head>
<body>
  <header>
    <a class="logo" href="/">
      <img class="parcel" src="assets/parcel.png" srcset="assets/parcel@2x.png 2x, assets/parcel@3x.png 3x" height="30">
      <img class="type" src="assets/logo.svg" alt="Parcel">
    </a>
    <div class="links">
      <a href="https://github.com/parcel-bundler/parcel" target="_blank">GitHub</a>
    </div>
  </header>
  <div class="content">
    <nav>
      <ul>
        <li><a href="getting_started.html">ğŸš€ å¿«é€Ÿå¼€å§‹</a></li>
        <li><a href="assets.html">ğŸ“¦ èµ„æº</a></li>
        <li><a href="transforms.html">ğŸ  è½¬æ¢</a></li>
        <li><a href="code_splitting.html">âœ‚ï¸ ä»£ç æ‹†åˆ†</a></li>
        <li><a href="hmr.html">ğŸ”¥ çƒ­æ¨¡å—æ›¿æ¢</a></li>
        <li><a href="production.html">âœ¨ ç”Ÿäº§ç¯å¢ƒ</a></li>
      </ul>
      <h3>è¿›é˜¶</h3>
      <ul>
        <li><a href="how_it_works.html">ğŸ›  å®ƒå¦‚ä½•è¿ä½œ</a></li>
        <li><a href="asset_types.html">ğŸ“ èµ„æºç±»å‹</a></li>
        <li><a href="packagers.html">ğŸ“¦ Packagers</a></li>
        <li><a href="plugins.html">ğŸ”Œ æ’ä»¶</a></li>
      </ul>
    </nav>
    <main><h1 id="ğŸ“-èµ„æºç±»å‹"><a class="header-link" href="#ğŸ“-èµ„æºç±»å‹"></a>ğŸ“ èµ„æºç±»å‹</h1>
<p>æ­£å¦‚ <a href="assets.html">èµ„æºæ–‡æ¡£</a> é‡Œæè¿°çš„ï¼ŒParcel å°†è¾“å…¥çš„æ–‡ä»¶çœ‹ä½œ <code>èµ„æºï¼ˆAssetï¼‰</code>ã€‚èµ„æºç±»å‹è¢«çœ‹ä½œç»§æ‰¿è‡ªåŸºå‡† <code>Asset</code>ç±»çš„å­ç±»ï¼Œå¹¶å®ç°äº†å¿…é¡»çš„æ¥å£ï¼Œå»è§£æã€åˆ†æä¾èµ–ã€è½¬æ¢åŠç”Ÿæˆä»£ç ã€‚</p>
<p>å› ä¸º Parcel åœ¨å¤šå¤„ç†å™¨å†…æ ¸ä¸­å¹¶è¡Œå¤„ç†èµ„æºï¼Œå› æ­¤èµ„æºç±»å‹æ‰€èƒ½å¤Ÿå®æ–½çš„è½¬æ¢è¡Œä¸ºï¼Œä¼šè¢«é™åˆ¶ä¸ºé‚£äº›å¯ä»¥åœ¨å•ä¸€æ—¶é—´å†…æ“ä½œå•ä¸€æ–‡ä»¶çš„è½¬æ¢è¡Œä¸ºã€‚è€Œé‚£äº›éœ€è¦æ“ä½œå¤šä¸ªæ–‡ä»¶çš„è½¬æ¢è¡Œä¸ºï¼Œåˆ™éœ€è¦ä¸€ä¸ªè‡ªå®šä¹‰çš„<a href="packagers.html">Packager</a>ã€‚</p>
<h2 id="èµ„æºæ¥å£"><a class="header-link" href="#èµ„æºæ¥å£"></a>èµ„æºæ¥å£</h2>
<pre class="hljs"><code><span class="hljs-keyword">const</span> {Asset} = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parcel-bundler'</span>);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyAsset</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Asset</span> </span>{
  type = <span class="hljs-string">'foo'</span>; <span class="hljs-comment">// è®¾ç½®ä¸»è¦è¾“å‡ºç±»å‹</span>

  parse(code) {
    <span class="hljs-comment">// å°†ä»£ç è§£æä¸ºASTæ ‘</span>
    <span class="hljs-keyword">return</span> ast;
  }

  pretransform() {
    <span class="hljs-comment">// å¯é€‰ã€‚åœ¨æ”¶é›†ä¾èµ–ä¹‹å‰è½¬æ¢ã€‚</span>
  }

  collectDependencies() {
    <span class="hljs-comment">// åˆ†æä¾èµ–</span>
    <span class="hljs-keyword">this</span>.addDependency(<span class="hljs-string">'my-dep'</span>);
  }

  transform() {
    <span class="hljs-comment">// å¯é€‰ã€‚åœ¨æ”¶é›†ä¾èµ–ä¹‹åè½¬æ¢ã€‚</span>
  }

  generate() {
    <span class="hljs-comment">// ç”Ÿæˆåšå¯¹ã€‚å¦‚æœ‰éœ€è¦ï¼Œå¯è¿”å›å¤šä¸ªè½¬æ¢(renditions)ã€‚</span>
    <span class="hljs-comment">// ç»“æœä¼šä¼ åˆ°åˆé€‚çš„ packagers å»ç”Ÿæˆæœ€ç»ˆçš„æ–‡ä»¶æŸ</span>
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">foo</span>: <span class="hljs-string">'my stuff here'</span>, <span class="hljs-comment">// ä¸»è¾“å‡º</span>
      js: <span class="hljs-string">'some javascript'</span> <span class="hljs-comment">// å¦‚è‹¥éœ€è¦ï¼Œæ­¤è½¬æ¢å†…å®¹å¯è¢«æ”¾åˆ° JS æ–‡ä»¶æŸä¸­</span>
    };
  }
}</code></pre><h2 id="æ³¨å†Œèµ„æºç±»å‹"><a class="header-link" href="#æ³¨å†Œèµ„æºç±»å‹"></a>æ³¨å†Œèµ„æºç±»å‹</h2>
<p>ä½ å¯ä»¥ç”¨ <code>addAssetType</code> æ–¹æ³•åœ¨æ‰“åŒ…å·¥å…·ä¸­å»æ³¨å†Œä½ çš„èµ„æºç±»å‹ã€‚å®ƒæ¥å—ä¸€ä¸ªæ–‡ä»¶æ‰©å±•åï¼Œä»¥åŠèµ„æºç±»å‹æ¨¡å—çš„è·¯å¾„ã€‚å®ƒæ˜¯ä¸€ä¸ªè·¯å¾„ï¼Œè€Œéå®é™…çš„å¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥ä½¿å®ƒè¢«ä¼ è‡³ worker è¿›ç¨‹ä¸­ã€‚</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> Bundler = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parcel-bundler'</span>);

<span class="hljs-keyword">let</span> bundler = <span class="hljs-keyword">new</span> Bundler(<span class="hljs-string">'input.js'</span>);
bundler.addAssetType(<span class="hljs-string">'.ext'</span>, <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'./MyAsset'</span>));</code></pre>    </main>
  </div>
  <script>
    (function () {
      var activeLink = Array.from(document.querySelectorAll('nav a')).find(function (a) {
        return a.href === window.location.href;
      });

      activeLink.classList.add('selected');
    })();
  </script>
</body>
</html>
