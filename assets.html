<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>📦 资源(Assets)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link type="text/css" rel="stylesheet" href="assets/style.css" />
  <link type="text/css" rel="stylesheet" href="assets/pilcrow.css" />
  <link type="text/css" rel="stylesheet" href="assets/hljs-github.min.css"/>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110647385-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110647385-1');
  </script>
</head>
<body>
  <header>
    <a class="logo" href="/">
      <img class="parcel" src="assets/parcel.png" srcset="assets/parcel@2x.png 2x, assets/parcel@3x.png 3x" height="30">
      <img class="type" src="assets/logo.svg" alt="Parcel">
    </a>
    <div class="links">
      <a href="https://github.com/parcel-bundler/parcel" target="_blank">GitHub</a>
    </div>
  </header>
  <div class="content">
    <nav>
      <ul>
        <li><a href="getting_started.html">🚀 快速开始</a></li>
        <li><a href="assets.html">📦 资源</a></li>
        <li><a href="transforms.html">🐠 转换</a></li>
        <li><a href="code_splitting.html">✂️ 代码拆分</a></li>
        <li><a href="hmr.html">🔥 热模块替换</a></li>
        <li><a href="production.html">✨ 生产环境</a></li>
      </ul>
      <h3>进阶</h3>
      <ul>
        <li><a href="how_it_works.html">🛠 它如何运作</a></li>
        <li><a href="asset_types.html">📝 资源类型</a></li>
        <li><a href="packagers.html">📦 Packagers</a></li>
        <li><a href="plugins.html">🔌 插件</a></li>
      </ul>
    </nav>
    <main><h1 id="📦-资源(assets)"><a class="header-link" href="#📦-资源(assets)"></a>📦 资源(Assets)</h1>
<p>Parcel 是基于资源的，资源可以代表任意文件, 并且 Parcel 对 JavaScript，CSS，HTML 文件有更多的支持。 Parcel 会自动地分析这些文件和包中引用的依赖。相同类型的资源会被组合到同一捆绑包中。如果导入其他类型的资源（例如：你在 JS 文件中导入 CSS 文件），Parcel会启动子捆绑包，并在父捆绑包中保留对它的引用。这一点将在以下部分进行说明。</p>
<h2 id="javascript"><a class="header-link" href="#javascript"></a>JavaScript</h2>
<p>JavaScript 是最传统的 Web 打包文件类型。 Parcel 同时支持 CommonJS 和 ES6 两种模块语法来导入文件。它也支持动态的 <code>import()</code> 函数语法异步加载模块，这一点会在<a href="code_splitting.html">代码拆分</a>部分有讨论。</p>
<pre class="hljs"><code><span class="hljs-comment">// 使用 CommonJS 语法导入模块</span>
<span class="hljs-keyword">const</span> dep = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./path/to/dep'</span>);

<span class="hljs-comment">// 使用 ES6 语法导入模块</span>
<span class="hljs-keyword">import</span> dep <span class="hljs-keyword">from</span> <span class="hljs-string">'./path/to/dep'</span>;</code></pre><p>你也能在 JavaScript 文件中导入非 JavaScript 资源，例如：CSS 文件及图片文件。导入这类文件时，Parcel不会像其他打包工具一样内联该文件，而是将所有的依赖放置在另外一个捆绑包里（例如：一个 CSS 文件）。当使用 <a href="https://github.com/css-modules/css-modules">CSS Modules</a> 时，这个导出类会被放置在 JavaScript 包里。其他的资源文件将以 URL 的形式导出到 JavaScript 包中的 output 中，以便于能在你的代码中引用。</p>
<pre class="hljs"><code><span class="hljs-comment">// 引入 CSS 文件</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./test.css'</span>;

<span class="hljs-comment">// 引入包含 CSS 模块的 CSS 文件</span>
<span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'./test.css'</span>;

<span class="hljs-comment">// 以 URL 的形式引入图片</span>
<span class="hljs-keyword">import</span> imageURL <span class="hljs-keyword">from</span> <span class="hljs-string">'./test.png'</span>;</code></pre><p>如果你想通过内联文件到 JavaScript 包取代 URL 引入文件的方式，你可以使用 Node.js 的 <code>fs.readFileSync</code> API。URL 必须是静态可分析的，意味着它不能有任何变量（除了<code>__dirname</code> 和 <code>__filename</code>）。</p>
<pre class="hljs"><code><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;

<span class="hljs-comment">// 以字符串的形式读取内容</span>
<span class="hljs-keyword">const</span> string = fs.readFileSync(__dirname + <span class="hljs-string">'/test.txt'</span>, <span class="hljs-string">'utf8'</span>);

<span class="hljs-comment">// 以 Buffer 的形式读取内容</span>
<span class="hljs-keyword">const</span> buffer = fs.readFileSync(__dirname + <span class="hljs-string">'/test.png'</span>);</code></pre><h2 id="css"><a class="header-link" href="#css"></a>CSS</h2>
<p>JavaScript 文件或 HTML 文件都能导入 CSS 资源，并且能通过 <code>@import</code> 语法引用依赖，还能通过 <code>url()</code> 函数引入图片，字体等。其他通过 <code>@import</code> 导入的 CSS 文件被内联到同一个CSS包里，并将 <code>url()</code> 引用重写为其输出文件名。所有文件名都应该与当前 CSS 文件相关联。</p>
<pre class="hljs"><code><span class="hljs-comment">/* 引入其他 CSS 文件 */</span>
@<span class="hljs-keyword">import</span> <span class="hljs-string">'./other.css'</span>;

<span class="hljs-selector-class">.test</span> {
  <span class="hljs-comment">/* 引用图像文件 */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'./images/background.png'</span>);
}</code></pre><p>除了普通的 CSS，其他的 LESS，SASS，以及 Stylus 等CSS预处理器语言也是支持的，并且执行方法与之相同的。</p>
<h2 id="html"><a class="header-link" href="#html"></a>HTML</h2>
<p>HTML 资源是提供给 Parcel 常用入口文件，但也可以被 JavaScript 文件引用，例如：提供链接给其他页面。如上所述，提取并编译脚本，样式，媒体以及其他的 HTML 文件的 URL 。引用会在HTML中被重新，以便链接到正确的输出文件。全部的文件名都应该和当前的 HTML 文件相关联。</p>
<pre class="hljs"><code><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- 引入图像文件 --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./images/header.png"</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"./other.html"</span>&gt;</span>链接到其他页面<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- 引入 JavaScript 捆绑包 --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"./index.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span></code></pre>    </main>
  </div>
  <script>
    (function () {
      var activeLink = Array.from(document.querySelectorAll('nav a')).find(function (a) {
        return a.href === window.location.href;
      });

      activeLink.classList.add('selected');
    })();
  </script>
</body>
</html>
