<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ğŸ“¦ Packagers</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link type="text/css" rel="stylesheet" href="assets/style.css" />
  <link type="text/css" rel="stylesheet" href="assets/pilcrow.css" />
  <link type="text/css" rel="stylesheet" href="assets/hljs-github.min.css"/>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110647385-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-110647385-1');
  </script>
</head>
<body>
  <header>
    <a class="logo" href="/">
      <img class="parcel" src="assets/parcel.png" srcset="assets/parcel@2x.png 2x, assets/parcel@3x.png 3x" height="30">
      <img class="type" src="assets/logo.svg" alt="Parcel">
    </a>
    <div class="links">
      <a href="https://github.com/parcel-bundler/parcel" target="_blank">GitHub</a>
    </div>
  </header>
  <div class="content">
    <nav>
      <ul>
        <li><a href="getting_started.html">ğŸš€ Getting Started</a></li>
        <li><a href="assets.html">ğŸ“¦ Assets</a></li>
        <li><a href="transforms.html">ğŸ  Transforms</a></li>
        <li><a href="code_splitting.html">âœ‚ï¸ Code Splitting</a></li>
        <li><a href="hmr.html">ğŸ”¥ Hot Module Replacement</a></li>
        <li><a href="production.html">âœ¨ Production</a></li>
      </ul>
      <h3>Advanced</h3>
      <ul>
        <li><a href="how_it_works.html">ğŸ›  How It Works</a></li>
        <li><a href="asset_types.html">ğŸ“ Asset Types</a></li>
        <li><a href="packagers.html">ğŸ“¦ Packagers</a></li>
        <li><a href="plugins.html">ğŸ”Œ Plugins</a></li>
      </ul>
    </nav>
    <main><h1 id="ğŸ“¦-packagers"><a class="header-link" href="#ğŸ“¦-packagers"></a>ğŸ“¦ Packagers</h1>
<p>In Parcel, a <code>Packager</code> combines multiple <code>Asset</code>s together into a final output bundle. This happens in the main process after all assets have been processed, and a bundle tree has been created. Packagers are registered based on output file type, and assets that have generated that output type are sent to that packager for production of the final output file.</p>
<h2 id="packager-interface"><a class="header-link" href="#packager-interface"></a>Packager Interface</h2>
<pre class="hljs"><code><span class="hljs-keyword">const</span> {Packager} = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parcel-bundler'</span>);

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyPackager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Packager</span> </span>{
  <span class="hljs-keyword">async</span> start() {
    <span class="hljs-comment">// optional. write file header if needed.</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.dest.write(header);
  }

  <span class="hljs-keyword">async</span> addAsset(asset) {
    <span class="hljs-comment">// required. write the asset to the output file.</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.dest.write(asset.generated.foo);
  }

  <span class="hljs-keyword">async</span> end() {
    <span class="hljs-comment">// optional. write file trailer if needed.</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.dest.end(trailer);
  }
}</code></pre><h2 id="registering-a-packager"><a class="header-link" href="#registering-a-packager"></a>Registering a Packager</h2>
<p>You can register your packager with a bundler using the <code>addPackager</code> method. It accepts a file type to register, and the path to your packager module.</p>
<pre class="hljs"><code><span class="hljs-keyword">const</span> Bundler = <span class="hljs-built_in">require</span>(<span class="hljs-string">'parcel-bundler'</span>);

<span class="hljs-keyword">let</span> bundler = <span class="hljs-keyword">new</span> Bundler(<span class="hljs-string">'input.js'</span>);
bundler.addPackager(<span class="hljs-string">'foo'</span>, <span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'./MyPackager'</span>));</code></pre>    </main>
  </div>
  <script>
    (function () {
      var activeLink = Array.from(document.querySelectorAll('nav a')).find(function (a) {
        return a.href === window.location.href;
      });

      activeLink.classList.add('selected');
    })();
  </script>
</body>
</html>
